<!DOCTYPE html>
<html>
<head>
  <title>Multi-Prop Generator</title>
  <link rel="stylesheet" href="css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap" rel="stylesheet">

  <!-- ✅ Use the SAME html2canvas build as the working system -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script src="https://unpkg.com/docx@8.3.0/build/index.umd.js"></script>

  <style>
    .preview-panel {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 20px;
    }
    .preview-box {
      background: #f4f4f4;
      border: 2px solid #ccc;
      padding: 10px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      overflow: auto;
    }
  </style>
</head>

<body>
  <form id="input-form" spellcheck="true" lang="en-GB">

    <!-- ✅ Broker selector added -->
    <label>Broker:
      <select id="broker">
        <option value="alex-krause" selected>Alex Krause</option>
        <option value="gary-brower">Gary Brower</option>
        <option value="bongane-khumalo">Bongane Khumalo</option>
        <option value="cliff-matshatsha">Cliff Matshatsha</option>
        <option value="daniel-wachenheimer">Daniel Wachenheimer</option>
        <option value="dean-doucha">Dean Doucha</option>
        <option value="elki-medalie">Elki Medalie</option>
        <option value="doron-sacks">Doron Sacks</option>
        <option value="george-merricks">George Merricks</option>
        <option value="gerhard-venter">Gerhard Venter</option>
        <option value="jenny-pillay">Jenny Pillay</option>
        <option value="jessica-beyers-lahner">Jessica Beyers-Lahner</option>
        <option value="jodi-bedil">Jodi Bedil</option>
        <option value="jodi-frankel">Jodi Frankel</option>
        <option value="keith-nkosi">Keith Nkosi</option>
        <option value="luanda-tlhotlhalemaje">Luanda Tlhotlhalemaje</option>
        <option value="nic-brett">Nic Brett</option>
        <option value="reece-louw">Reece Louw</option>
        <option value="reshma-sookran">Reshma Sookran</option>
        <option value="shlomo-hecht">Shlomo Hecht</option>
        <option value="sim-mthembu">Sim Mthembu</option>
        <option value="stuart-holliman">Stuart Holliman</option>
        <option value="thabani-ncube">Thabani Ncube</option>
        <option value="yoni-dadon">Yoni Dadon</option>
      </select>
    </label><br>

    <label>Headline: <textarea id="headline" rows="1" spellcheck="true">Lux 6-Bed Penthouse</textarea></label><br>
    <label>Subheadline: <textarea id="subheadline" rows="1" spellcheck="true">Lux 6-Bed</textarea></label><br>
    <label>Subheadline 2: <textarea id="subheadline2" rows="1" spellcheck="true">Penthouse</textarea></label><br>
    <label>City: <textarea id="city" rows="1" spellcheck="true">Cape Town</textarea></label><br>
    <label>Suburb: <textarea id="suburb" rows="1" spellcheck="true">Sandton</textarea></label><br>
    <label>Tagline 1: <textarea id="tag1" rows="1" spellcheck="true">Breathtaking</textarea></label><br>
    <label>Tagline 2: <textarea id="tag2" rows="1" spellcheck="true">Views</textarea></label><br>

    <!-- ✅ No hardcoded value. JS will set today if empty -->
    <label>Select Date: <input type="date" id="date-picker"></label><br>

    <label>Select Time:
      <select id="time-picker">
        <option value="09:00">09:00</option>
        <option value="09:30">09:30</option>
        <option value="10:00">10:00</option>
        <option value="10:30" selected>10:30</option>
        <option value="11:00">11:00</option>
        <option value="11:30">11:30</option>
        <option value="12:00">12:00</option>
        <option value="12:30">12:30</option>
        <option value="14:00">14:00</option>
        <option value="14:30">14:30</option>
        <option value="18:00">18:00</option>
        <option value="18:30">18:30</option>
      </select>
    </label><br>

    <label>Address: <textarea id="address" rows="1" spellcheck="true">41 West Street, Houghton Estate</textarea></label><br>
    <label>Feature 1: <textarea id="feat1" rows="1" spellcheck="true">6 Bedrooms + 4 Bathrooms (main en-suite)</textarea></label><br>
    <label>Feature 2: <textarea id="feat2" rows="1" spellcheck="true">Home Office | Enclosed Entertainment Patio</textarea></label><br>
    <label>Feature 3: <textarea id="feat3" rows="1" spellcheck="true">Expansive Garden, Sparkling Pool + 2 Garages</textarea></label><br>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; max-width: 750px; margin-bottom: 10px;">
      <label style="display: flex; flex-direction: column;">
        ERF Size:
        <input type="text" id="erf-size" style="width: 100%;">
      </label>
      <label style="display: flex; flex-direction: column;">
        GLA:
        <input type="text" id="gla" style="width: 100%;">
      </label>
    </div>

    <label>Upload Property Image: <input type="file" id="property-img"></label><br>
  </form>

  <!-- ✅ Buttons MUST be type="button" so the form never submits -->
  <button type="button" onclick="downloadWordDoc()">Download Word Summary</button>

  <h2>Previews</h2>
  <div class="preview-panel">
    <div class="preview-block">
      <h3>Social Design</h3>
      <button type="button" onclick="generateAndDownload('social')">Download Social</button>
      <div id="social-preview" class="preview-box"></div>
    </div>

    <div class="preview-block">
      <h3>Commercial ERF Social</h3>
      <button type="button" onclick="generateAndDownload('commercial_erf')">Download ERF Social</button>
      <div id="erf-preview" class="preview-box"></div>
    </div>

    <div class="preview-block">
      <h3>Commercial GLA Social</h3>
      <button type="button" onclick="generateAndDownload('commercial_gla')">Download GLA Social</button>
      <div id="gla-preview" class="preview-box"></div>
    </div>

    <div class="preview-block">
      <h3>Commercial ERF + GLA Social</h3>
      <button type="button" onclick="generateAndDownload('commercial_dual')">Download ERF+GLA Social</button>
      <div id="dual-preview" class="preview-box"></div>
    </div>

    <div class="preview-block">
      <h3>Newsletter Design</h3>
      <button type="button" onclick="generateAndDownload('newsletter')">Download Newsletter</button>
      <div id="newsletter-preview" class="preview-box"></div>
    </div>

    <div class="preview-block">
      <h3>Multi-Property Flyer</h3>
      <button type="button" onclick="generateAndDownload('multi_flyer')">Download Multi-Flyer</button>
      <div id="multi-flyer-preview" class="preview-box"></div>
    </div>
  </div>

  <script src="js/builder.js?v=1"></script>
</body>
</html>
